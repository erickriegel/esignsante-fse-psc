= POC esignsante-psc 


== Introduction
Ce site est la documentation de l'API esignsante-psc extraite des tests.

Pour tester l'API, vous pouvez utiliser swagger: +
http://localhost:8080:/esignsante-psc/v1/swagger-ui/ +
Ne pas oublier d'activer le profil 'swagger' au démarrage de Spring: 
java -jar *-Dspring.profiles.active=swagger* esignsante-psc-0.0.13-SNAPSHOT.jar .../application.properties ...

== Pour DEV (à supprimer)
URL racine http://localhost:8080:/esignsante-psc/v1 +
version: +
artifact: +

start class (from POM properties)=>:: {start-class}

<balise></balise>
& é è " ^ $ à ç 

== Interrogation de l'API
Liste des services exposés

=== cas passant 200
.request
http:
include::{snippets}/Liste_des_services/OK/http-request.adoc[]

httpIE:
include::{snippets}/Liste_des_services/OK/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/Liste_des_services/OK/curl-request.adoc[]

.response
include::{snippets}/Liste_des_services/OK/http-response.adoc[]

Payload:
include::{snippets}/Liste_des_services/OK/response-body.adoc[]

=== cas non passant mauvais header accept 406

http:
include::{snippets}/Liste_des_services/KO_NotAcceptable/http-request.adoc[]

httpIE:
include::{snippets}/Liste_des_services/KO_NotAcceptable/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/Liste_des_services/KO_NotAcceptable/curl-request.adoc[]

.response
include::{snippets}/Liste_des_services/KO_NotAcceptable/http-response.adoc[]


== Demande de la liste des Cas

=== Cas passant 200
.request
include::{snippets}/CA/OK/http-request.adoc[]

httpIE:
include::{snippets}/CA/OK/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/CA/OK/curl-request.adoc[]

.response
include::{snippets}/CA/OK/http-response.adoc[]

payload:
include::{snippets}/CA/OK/response-body.adoc[]

=== cas non passant-header accept invalide 406

http:
include::{snippets}/CA/KO_NotAcceptable/http-request.adoc[]

httpIE:
include::{snippets}/CA/KO_NotAcceptable/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/CA/KO_NotAcceptable/curl-request.adoc[]

.response
include::{snippets}/CA/KO_NotAcceptable/http-response.adoc[]


=== cas non passant esignsanteWebservices non disponible 503

http:
include::{snippets}/CA/esginWS_OFF/http-request.adoc[]

httpIE:
include::{snippets}/CA/esginWS_OFF/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/CA/esginWS_OFF/curl-request.adoc[]

.response
include::{snippets}/CA/esginWS_OFF/http-response.adoc[]

== Demande de contrôle de signature XADES

=== Cas passant 200
.request
include::{snippets}/checkSignXADES/OK/http-request.adoc[]

httpIE:
include::{snippets}/checkSignXADES/OK/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/checkSignXADES/OK/curl-request.adoc[]

.response
include::{snippets}/checkSignXADES/OK/http-response.adoc[]

payload:
include::{snippets}/checkSignXADES/OK/response-body.adoc[]

=== Cas non passant esignWS Off 503
http:
include::{snippets}/checkSignXADES/esginWS_OFF/http-request.adoc[]

httpIE:
include::{snippets}/checkSignXADES/esginWS_OFF/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/checkSignXADES/esginWS_OFF/curl-request.adoc[]

.response
include::{snippets}/checkSignXADES/esginWS_OFF/http-response.adoc[]


=== Cas non passant fichier non xml 501 (415?)
.request
http:
include::{snippets}/checkSignXADES/BadFileFormat/http-request.adoc[]

httpIE:
include::{snippets}/checkSignXADES/BadFileFormat/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/checkSignXADES/BadFileFormat/curl-request.adoc[]

.response
include::{snippets}/checkSignXADES/BadFileFormat/http-response.adoc[]

=== cas non passant-header accept invalide 406

http:
include::{snippets}/checkSignXADES/KO_NotAcceptable/http-request.adoc[]

httpIE:
include::{snippets}/checkSignXADES/KO_NotAcceptable/httpie-request.adoc[]

Requête avec curl:
include::{snippets}/checkSignXADES/KO_NotAcceptable/curl-request.adoc[]

.response
include::{snippets}/checkSignXADES/KO_NotAcceptable/http-response.adoc[]

== Demande de signature XADES

=== Cas Token Invalid
.request
include::{snippets}/signature/XADES/TokenKo/http-request.adoc[]

payload:
include::{snippets}/signature/XADES/TokenKo/request-body.adoc[]


.response
include::{snippets}/signature/XADES/TokenKo/http-response.adoc[]

=== Cas Header Accept non Json
.request
include::{snippets}/signature/XADES/HeaderKO/http-request.adoc[]

payload:
include::{snippets}/signature/XADES/HeaderKO/request-body.adoc[]


.response
include::{snippets}/signature/XADES/HeaderKO/http-response.adoc[]


=== Cas Stream In KO
.request
include::{snippets}/signature/XADES/StreamKo/http-request.adoc[]


.response
include::{snippets}/signature/XADES/StreamKo/http-response.adoc[]







